{"ast":null,"code":"import React,{useState}from'react';import'./Auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin,onSwitchToRegister}=_ref;const[formData,setFormData]=useState({email:'',password:''});const[errors,setErrors]=useState({});const[loading,setLoading]=useState(false);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>({...prev,[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.email){newErrors.email='Email is required';}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='Email is invalid';}if(!formData.password){newErrors.password='Password is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{const response=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(data.status==='success'){// Store token in localStorage\nlocalStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));// Call parent callback\nonLogin(data.user,data.token);}else{setErrors({general:data.message||'Login failed'});}}catch(error){console.error('Login error:',error);setErrors({general:'Network error. Please try again.'});}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDD10 Login to HRMS\"}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\",children:\"Welcome back! Please sign in to your account.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"auth-form\",children:[errors.general&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.general}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:errors.email?'error':'',placeholder:\"Enter your email\"}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:errors.password?'error':'',placeholder:\"Enter your password\"}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"auth-button\",disabled:loading,children:loading?'Signing in...':'Sign In'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"link-button\",onClick:onSwitchToRegister,children:\"Register here\"})]})})]})});};export default Login;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","onSwitchToRegister","formData","setFormData","email","password","errors","setErrors","loading","setLoading","handleChange","e","name","value","target","prev","validateForm","newErrors","test","Object","keys","length","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","status","localStorage","setItem","token","user","general","message","error","console","className","children","onSubmit","htmlFor","type","id","onChange","placeholder","disabled","onClick"],"sources":["/Users/nihith/HRMS/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './Auth.css';\n\nconst Login = ({ onLogin, onSwitchToRegister }) => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'Email is invalid';\n    }\n    \n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        // Store token in localStorage\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        \n        // Call parent callback\n        onLogin(data.user, data.token);\n      } else {\n        setErrors({ general: data.message || 'Login failed' });\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      setErrors({ general: 'Network error. Please try again.' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-card\">\n        <h2>üîê Login to HRMS</h2>\n        <p className=\"auth-subtitle\">Welcome back! Please sign in to your account.</p>\n        \n        <form onSubmit={handleSubmit} className=\"auth-form\">\n          {errors.general && (\n            <div className=\"error-message\">{errors.general}</div>\n          )}\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className={errors.email ? 'error' : ''}\n              placeholder=\"Enter your email\"\n            />\n            {errors.email && <span className=\"error-text\">{errors.email}</span>}\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className={errors.password ? 'error' : ''}\n              placeholder=\"Enter your password\"\n            />\n            {errors.password && <span className=\"error-text\">{errors.password}</span>}\n          </div>\n\n          <button \n            type=\"submit\" \n            className=\"auth-button\" \n            disabled={loading}\n          >\n            {loading ? 'Signing in...' : 'Sign In'}\n          </button>\n        </form>\n\n        <div className=\"auth-footer\">\n          <p>\n            Don't have an account?{' '}\n            <button \n              type=\"button\" \n              className=\"link-button\" \n              onClick={onSwitchToRegister}\n            >\n              Register here\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}